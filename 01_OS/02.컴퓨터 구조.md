> # 02.컴퓨터 시스템의 구조
>
> > 본 과목은 OS 사용자 관점이 아니라 OS 개발자 관점에서 바라봐야한다. 대부분의 알고리즘은 OS 프로그램 자체의 내용이다. 컴퓨터 하드웨어는 마치 사람처럼 운영체제의 통제를 받는데 그 운영체제는 사람이 프로그래밍을 하는 것이다.
>
> ## 1. 운영체제란 무엇인가?
>
> ### OS (Operating System)
>
> - 컴퓨터 하드웨어 바로 위에 설치되어 사용자 및 다른 모든 소프트웨어와 하드웨어를 연결하는 소프트웨어 계층
> - 협의의 운영체제(커널): 운영체제 핵심, 메모리에 상주하는 부분
> - 광의의 운영체제: 커널 뿐 아니라 각종 주변 시스템 유틸리티를 포함하는 개념
>
> ### **운영체제의 목적**
>
> - 컴퓨터 시스템을 편리하게 사용할 수 있는 환경을 제공
> - 컴퓨터 시스템의 자원을 효율적으로 관리
>
> ## 2. 운영체제의 분류
>
> - 동시 작업 가능 여부
>   - 단일 작업(single tasking): 한 번에 하나의 작업만 정리
>   - 다중 작업(multi tasking): 동시에 두 개 이상의 작업 정리
>   
> - 사용자의 수
>   - 단일 사용자: MS-DOS, MS Windows
>   - 다중 사용자: UNIX, NT server
>   
> - 처리 방식
>   - 일괄 처리(batch processing): 작업 요청의 일정량을 모아 한꺼번에 정리
>   
>   - 시분할(time sharing): 컴퓨터 처리 능력을 일정한 시간 단위로 분할해 사용
>     - 짧은 응답 시간, interactive한 방식
>     
>   - 실시간(Realtime): 정해진 시간 안에 어떤 일이 반드시 종료가 보장되어야 함
>     - Hard realtime system(경성 실시간 시스템)
>     
>     - Soft realtime system(연성 실시간 시스템)
>     
>       ​		
>
> ## 3. 용어
>
> - ## Multi Tasking - 여러 작업을 동시에 처리
>
> - ## Multi Programming - 여러 프로그램이 메모리에 적재됨을 의미
>
> - ## Time Sharing - CPU 자원을 시간 단위로 분할해 사용한다는 의미
>
> - ## Multi Processor - 하나의 컴퓨터에 여러 개의 cpu가 붙어 있음을 의미
>
> ## 4. 예시
>
> - 유닉스(UNIX)
>   - 코드의 대부분이 C언어로 이루어짐
>   - 높은 이식성
>   - 최소한의 커널 구조
>   - 확장의 용이
>   - 소스코드 공개
>   - 개발에 용이
>   - 다양한 버전 존재, 베포판의 개념
> - DOS
>   - 단일 사용자용
>   - 메모리 관리 능력의 한계
> - Windows
>   - GUI 기반
>   - 다중작업용
>   - 풍부한 소프트웨어 지원
>   - Plug and play, 네트워크 환경 강화
>   - 불안정성
>   - dos app 호환성 제공
>
> ## 5. 추가로 언급된 OS 역할
>
> - CPU 스케줄링
> - 메모리 관리
> - 파일관리
> - 프로세스 관리
> - 입출력 관리
> - 보호 시스템, 네트워킹
> - 인터프리터
>
> ## 6. 컴퓨터의 구조
>
> ![image-20220201163131622](02.컴퓨터 구조.assets/image-20220201163131622-3700696.png)
>
> ### 
>
> ### Mode bit
>
> > 사용자 프로그램의 잘못된 수행으로 다른 프로그램 및 운영체제에 피해가 가지 않도록 하기 위한 보호 장치
>
> - 사용자 모드 : 사용자 프로그램을 수행(1)
> - 모니터 모드 : OS코드 수행 (커널 모드, 시스템 모드 라고도 함)
>
> 보안을 해칠 수 있는 중요한 명령어는 모니터 모드에서만 수행 가능한 **특권 명령**으로 규정
>
> Interrupt나 Exception 발생시 하드웨어가 mode bit을 0으로 바꿈
>
> 사용자 프로그램에게 CPU를 넘기기 전에 mode bit을 1로 셋팅
>
> ![image-20220201163159269](02.컴퓨터 구조.assets/image-20220201163159269.png)
>
> CPU가 장치들에게 보낸 명령을 장치들이 수행 완료 시 device controller가 CPU에 interrupt를 걸어 신호를 보낸다
>
> ### 타이머
>
> > time sharing(시분할)을 구현하기 위해 널리 이용됨
> >
> > 뿐만 아니라 현재 시간을 계산하기 위해서도 사용
>
> - 정해진 시간이 흐른 뒤 운영체제에게 제어권이 넘어가도록 인터럽트를 발생
> - 타이머는 매 클럭 틱 때마다 1씩 감소
> - 타이머 값이  0이 되면 타이머 인터럽트 발생
> - CPU를 특정 프로그램이 독점하는 것으로부터 보호
>
> <img src="02.컴퓨터 구조.assets/image-20220201163255204.png" alt="image-20220201163255204" style="zoom:67%;" />
>
> ### 인터럽트
>
> 타이머: 운영제어권의 이동(CPU → 운영체제)
>
> - 궁금한점) 인터럽트가 발생하는 진짜 시점??
>
> <img src="02.컴퓨터 구조.assets/image-20220201163402235.png" alt="image-20220201163402235" style="zoom:67%;" />
>
> ### 트랩
>
> - 예외(Exception) : 프로그램 동작시 오류가 생기는 경우
> - 시스템콜(System call) : 프로그램이 커널 함수를 사용하기위해 OS에 cpu를 넘기는 경우
>
> 사용자 프로그램이 운영체제의 서비스를 받기 위해 커널 함수를 호출(인터럽트를 검)
>
> ### 디바이스 컨트롤러
>
> 하드웨어, IO 장치마다 펌웨어가 존재해 동작하도록 한다.
>
> <img src="02.컴퓨터 구조.assets/image-20220201163420403.png" alt="image-20220201163420403" style="zoom:67%;" />
>
> device driver: CPU가 device controller에게 신호를 주기 위한 기계어, software
>
> ### Q) CPU에서 운영체제로 권한이 넘어가는 경우 3가지를 말해보시오
>
> - 인터럽트의 관점
>   - 하드웨어적: dc
>   - 소프트웨어적: 시스템 콜(메모리의 프로그램), 오류
> - 점유의 측면에서
>   - Timer: time sharing
>   - CPU를 더 이상 필요로 하지 않는 경우
>
> ### 동기식 입출력과 비동기식 입출력
>
> > 동기식, 비동기시 두 경우 전부 I/O의 완료는 인터럽트로 알려줌
>
> - 동기식 입출력(Synchronous I/O)
>
>   > I/O 요청 후 입출력 작업이 **완료된 후**에야 제어가 사용자 프로그램에 넘어감
>
>   - 구현 방법 1
>     - I/O가 끝날 때까지 CPU를 낭비시킴
>     - 매시점 하나의 I/O만 일어날 수 있음
>   - 구현 방법 2
>     - I/O가 완료될 때까지 해당 프로그램에게서 CPU를 빼앗음
>     - I/O 처리를 기다리는 줄에 그 프로그램을 줄 세움
>     - I/O 처리를 기다리는 동안 다른 프로그램에게 CPU를 줌
>
> - 비동기식 입출력(Asynchronous I/O)
>
>   > I/O가 시작된 후 입출력 작업이 끝나기를 기다리지 않고 제어가 사용자 프로그램에 즉시 넘어감
>
>   - 입출력 장치의 멀티테스킹
>   - I/O 사용 정보랑 무관한 작업을 바로 진행
>
> <img src="02.컴퓨터 구조.assets/image-20220201163437513.png" alt="image-20220201163437513" style="zoom:67%;" />
>
> <img src="02.컴퓨터 구조.assets/image-20220201163456720.png" alt="image-20220201163456720" style="zoom:67%;" />
>
> ### DMA(Direct Memory Access)
>
> 고속 입출력 장치: 인터럽트가 자주 걸리면 CPU에 비효율이 발생하기 때문에 CPU와 dc 사이에서 버퍼의 내용을 카피해 전송해주는 역할
>
> <img src="02.컴퓨터 구조.assets/image-20220201163508945.png" alt="image-20220201163508945" style="zoom:67%;" />
>
> ### 입출력 기계어 종류
>
> - I/O를 수행하는 special instruction(기계어)
> - Memory Mapped I/O

<img src="02.컴퓨터 구조.assets/image-20220201163523005.png" alt="image-20220201163523005" style="zoom:67%;" />